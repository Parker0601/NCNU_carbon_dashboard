# ğŸ“ é …ç›®çµæ§‹è©³ç´°èªªæ˜

## ğŸ¯ æ¦‚è¿°

Carbon Management System æ¡ç”¨å‰å¾Œç«¯åˆ†é›¢æ¶æ§‹ï¼Œä½¿ç”¨ npm workspaces é€²è¡Œçµ±ä¸€ç®¡ç†ã€‚æœ¬æ–‡æª”è©³ç´°èªªæ˜é …ç›®çš„ç›®éŒ„çµæ§‹å’Œå„å€‹æ–‡ä»¶çš„ä½œç”¨ã€‚

## ğŸ—ï¸ æ•´é«”æ¶æ§‹

```
carbon-management-system/
â”œâ”€â”€ ğŸ“ backend/           # å¾Œç«¯ API æœå‹™
â”œâ”€â”€ ğŸ“ frontend/          # å‰ç«¯ UI æ‡‰ç”¨
â”œâ”€â”€ ğŸ“ shared/            # å…±äº«é…ç½®
â”œâ”€â”€ ğŸ“ docs/              # é …ç›®æ–‡æª”
â”œâ”€â”€ ğŸ“ docker/            # Docker é…ç½®
â””â”€â”€ ğŸ“„ æ ¹ç›®éŒ„æ–‡ä»¶
```

## ğŸ“‚ è©³ç´°ç›®éŒ„çµæ§‹

### ğŸ–¥ï¸ å¾Œç«¯ (backend/)

```
backend/
â”œâ”€â”€ ğŸ“ src/                    # æºä»£ç¢¼ç›®éŒ„
â”‚   â”œâ”€â”€ ğŸ“ config/            # é…ç½®æ–‡ä»¶
â”‚   â”‚   â””â”€â”€ ğŸ“„ env.ts         # ç’°å¢ƒè®Šé‡é…ç½®
â”‚   â”œâ”€â”€ ğŸ“ db/               # æ•¸æ“šåº«ç›¸é—œ
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ index.ts      # æ•¸æ“šåº«é€£æ¥
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ schema.ts     # æ•¸æ“šåº«è¡¨çµæ§‹å®šç¾©
â”‚   â”‚   â””â”€â”€ ğŸ“ seed/         # æ•¸æ“šåº«ç¨®å­æ•¸æ“š
â”‚   â”‚       â”œâ”€â”€ ğŸ“„ fake.ts   # å‡æ•¸æ“šç”Ÿæˆ
â”‚   â”‚       â”œâ”€â”€ ğŸ“„ run.ts    # ç¨®å­æ•¸æ“šåŸ·è¡Œ
â”‚   â”‚       â””â”€â”€ ğŸ“„ system.ts # ç³»çµ±åˆå§‹æ•¸æ“š
â”‚   â”œâ”€â”€ ğŸ“ middleware/       # Express ä¸­é–“ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ auth.ts       # JWT èªè­‰ä¸­é–“ä»¶
â”‚   â”‚   â””â”€â”€ ğŸ“„ error.ts      # éŒ¯èª¤è™•ç†ä¸­é–“ä»¶
â”‚   â”œâ”€â”€ ğŸ“ routes/           # API è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ auth.routes.ts    # èªè­‰ç›¸é—œè·¯ç”±
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ carbon.routes.ts  # ç¢³ç®¡ç†è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ admin.routes.ts   # ç®¡ç†å“¡è·¯ç”±
â”‚   â”‚   â””â”€â”€ ğŸ“„ index.ts          # è·¯ç”±æ•´åˆ
â”‚   â”œâ”€â”€ ğŸ“ types/            # TypeScript é¡å‹å®šç¾©
â”‚   â”‚   â””â”€â”€ ğŸ“„ express.d.ts  # Express é¡å‹æ“´å±•
â”‚   â”œâ”€â”€ ğŸ“ utils/            # å·¥å…·å‡½æ•¸
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ passwords.ts  # å¯†ç¢¼è™•ç†å·¥å…·
â”‚   â”‚   â””â”€â”€ ğŸ“„ responses.ts  # çµ±ä¸€å›æ‡‰æ ¼å¼
â”‚   â”œâ”€â”€ ğŸ“ validators/       # æ•¸æ“šé©—è­‰
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ auth.validator.ts    # èªè­‰æ•¸æ“šé©—è­‰
â”‚   â”‚   â””â”€â”€ ğŸ“„ carbon.validator.ts  # ç¢³æ•¸æ“šé©—è­‰
â”‚   â”œâ”€â”€ ğŸ“„ app.ts           # Express æ‡‰ç”¨é…ç½®
â”‚   â””â”€â”€ ğŸ“„ server.ts        # æœå‹™å™¨å•Ÿå‹•æ–‡ä»¶
â”œâ”€â”€ ğŸ“ tests/               # æ¸¬è©¦æ–‡ä»¶
â”‚   â””â”€â”€ ğŸ“„ auth.test.ts     # èªè­‰åŠŸèƒ½æ¸¬è©¦
â”œâ”€â”€ ğŸ“„ package.json         # å¾Œç«¯ä¾è³´é…ç½®
â”œâ”€â”€ ğŸ“„ package-lock.json    # ä¾è³´é–å®šæ–‡ä»¶
â”œâ”€â”€ ğŸ“„ tsconfig.json        # TypeScript é…ç½®
â””â”€â”€ ğŸ“„ drizzle.config.ts    # Drizzle ORM é…ç½®
```

### ğŸ¨ å‰ç«¯ (frontend/)

```
frontend/
â”œâ”€â”€ ğŸ“ src/                     # æºä»£ç¢¼ç›®éŒ„
â”‚   â”œâ”€â”€ ğŸ“ content/            # é é¢å…§å®¹
â”‚   â”‚   â”œâ”€â”€ ğŸ“ page/           # å„ç¨®é é¢
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ page_login/     # ç™»å…¥é é¢
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ page_register/  # è¨»å†Šé é¢
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ page_profile/   # ç”¨æˆ¶è³‡æ–™é é¢
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ manager_dashboard/  # ç®¡ç†å“¡å„€è¡¨æ¿
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ staff_dashboard/    # å“¡å·¥å„€è¡¨æ¿
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ boss_dashboard/     # è€é—†å„€è¡¨æ¿
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ page_projects/      # å°ˆæ¡ˆç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ page_contacts/      # è¯çµ¡äººç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ page_inbox/         # è¨Šæ¯æ”¶ä»¶åŒ£
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ page_chat/          # å³æ™‚èŠå¤©
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ page_error/         # éŒ¯èª¤é é¢
â”‚   â”‚   â”œâ”€â”€ ğŸ“ settings/       # è¨­å®šé é¢
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ settings_theme_modes/    # ä¸»é¡Œæ¨¡å¼è¨­å®š
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ settings_skin_options/   # å¤–è§€è¨­å®š
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ settings_layout_options/ # ç‰ˆé¢é…ç½®
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ settings_how_it_works/   # ä½¿ç”¨èªªæ˜
â”‚   â”‚   â””â”€â”€ ğŸ“ docs/           # æ–‡æª”é é¢
â”‚   â”œâ”€â”€ ğŸ“ custom/            # è‡ªå®šç¾©è³‡æº
â”‚   â”‚   â”œâ”€â”€ ğŸ“ demo-data/     # æ¼”ç¤ºæ•¸æ“š
â”‚   â”‚   â”œâ”€â”€ ğŸ“ docs-data/     # æ–‡æª”æ•¸æ“š
â”‚   â”‚   â”œâ”€â”€ ğŸ“ lang/          # å¤šèªè¨€æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“ media/         # åª’é«”æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“ plugins/       # è‡ªå®šç¾©æ’ä»¶
â”‚   â”‚   â””â”€â”€ ğŸ“ webfonts/      # ç¶²é å­—é«”
â”‚   â”œâ”€â”€ ğŸ“ js/               # JavaScript æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“ _config/      # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“ _modules/     # æ¨¡çµ„æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ manager-nav.js    # ç®¡ç†å“¡å°èˆª
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ role-nav.js       # è§’è‰²å°èˆª
â”‚   â”‚   â””â”€â”€ ğŸ“„ manifest.json     # PWA æ¸…å–®
â”‚   â”œâ”€â”€ ğŸ“ scss/             # SCSS æ¨£å¼æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“ _extensions/  # æ“´å±•æ¨£å¼
â”‚   â”‚   â”œâ”€â”€ ğŸ“ _imports/     # å°å…¥æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“ _mixins/      # æ··å…¥æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“ _modules/     # æ¨¡çµ„æ¨£å¼
â”‚   â”‚   â”œâ”€â”€ ğŸ“ _skins/       # çš®è†šæ¨£å¼
â”‚   â”‚   â”œâ”€â”€ ğŸ“ _themes/      # ä¸»é¡Œæ¨£å¼
â”‚   â”‚   â””â”€â”€ ğŸ“„ app.core.scss # æ ¸å¿ƒæ¨£å¼
â”‚   â”œâ”€â”€ ğŸ“ template/         # æ¨¡æ¿æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“ _helpers/     # åŠ©æ‰‹å‡½æ•¸
â”‚   â”‚   â”œâ”€â”€ ğŸ“ include/      # åŒ…å«æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“ layouts/      # ä½ˆå±€æ¨¡æ¿
â”‚   â”‚   â””â”€â”€ ğŸ“ pages/        # é é¢æ¨¡æ¿
â”‚   â”œâ”€â”€ ğŸ“ img/              # åœ–ç‰‡è³‡æº
â”‚   â”‚   â”œâ”€â”€ ğŸ“ backgrounds/  # èƒŒæ™¯åœ–ç‰‡
â”‚   â”‚   â”œâ”€â”€ ğŸ“ card-backgrounds/ # å¡ç‰‡èƒŒæ™¯
â”‚   â”‚   â”œâ”€â”€ ğŸ“ demo/         # æ¼”ç¤ºåœ–ç‰‡
â”‚   â”‚   â”œâ”€â”€ ğŸ“ favicon/      # ç¶²ç«™åœ–æ¨™
â”‚   â”‚   â”œâ”€â”€ ğŸ“ loading.gif   # è¼‰å…¥å‹•ç•«
â”‚   â”‚   â”œâ”€â”€ ğŸ“ splashscreens/ # å•Ÿå‹•ç•«é¢
â”‚   â”‚   â”œâ”€â”€ ğŸ“ svg/          # SVG åœ–æ¨™
â”‚   â”‚   â””â”€â”€ ğŸ“ thumbs/       # ç¸®ç•¥åœ–
â”‚   â”œâ”€â”€ ğŸ“„ nav.json          # å°èˆªé…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ favicon.ico       # ç¶²ç«™åœ–æ¨™
â”‚   â””â”€â”€ ğŸ“ navigation/       # å°èˆªé…ç½®
â”‚       â””â”€â”€ ğŸ“„ routes.json   # è·¯ç”±é…ç½®
â”œâ”€â”€ ğŸ“ build/               # æ§‹å»ºé…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ build.js         # æ§‹å»ºè…³æœ¬
â”‚   â”œâ”€â”€ ğŸ“„ compile.js       # ç·¨è­¯è…³æœ¬
â”‚   â”œâ”€â”€ ğŸ“„ connect.js       # é€£æ¥è…³æœ¬
â”‚   â””â”€â”€ ğŸ“„ watch.js         # ç›£è¦–è…³æœ¬
â”œâ”€â”€ ğŸ“ dist/                # æ§‹å»ºè¼¸å‡ºç›®éŒ„
â”œâ”€â”€ ğŸ“„ package.json         # å‰ç«¯ä¾è³´é…ç½®
â”œâ”€â”€ ğŸ“„ package-lock.json    # ä¾è³´é–å®šæ–‡ä»¶
â”œâ”€â”€ ğŸ“„ gulpfile.js          # Gulp æ§‹å»ºé…ç½®
â”œâ”€â”€ ğŸ“„ build.json           # æ§‹å»ºåƒæ•¸é…ç½®
â”œâ”€â”€ ğŸ“„ plugins-list.txt     # æ’ä»¶åˆ—è¡¨
â”œâ”€â”€ ğŸ“„ role-validation.js   # è§’è‰²é©—è­‰
â””â”€â”€ ğŸ“„ README.md            # å‰ç«¯èªªæ˜
```

### ğŸ”§ å…±äº«é…ç½® (shared/)

```
shared/
â””â”€â”€ ğŸ“„ config.js            # å…±äº«é…ç½®æ–‡ä»¶
    â”œâ”€â”€ API é…ç½®
    â”œâ”€â”€ æ•¸æ“šåº«é…ç½®
    â”œâ”€â”€ å‰ç«¯é…ç½®
    â”œâ”€â”€ å¾Œç«¯é…ç½®
    â”œâ”€â”€ ç’°å¢ƒé…ç½®
    â””â”€â”€ JWT é…ç½®
```

### ğŸ“š æ–‡æª”ç›®éŒ„ (docs/)

```
docs/
â”œâ”€â”€ ğŸ“„ INTEGRATION_GUIDE.md     # æ•´åˆæŒ‡å—
â”œâ”€â”€ ğŸ“„ PROJECT_STRUCTURE.md     # é …ç›®çµæ§‹èªªæ˜ (æœ¬æ–‡ä»¶)
â”œâ”€â”€ ğŸ“„ DOCKER_SETUP.md          # Docker è¨­ç½®æŒ‡å—
â”œâ”€â”€ ğŸ“„ DATABASE_URL_GUIDE.md    # æ•¸æ“šåº«é€£æ¥æŒ‡å—
â”œâ”€â”€ ğŸ“„ ENV_SETUP.md             # ç’°å¢ƒè®Šé‡è¨­ç½®æŒ‡å—
â””â”€â”€ ğŸ“„ API_DOCUMENTATION.md     # API æ–‡æª”
```

### ğŸ³ Docker é…ç½® (docker/)

```
docker/
â”œâ”€â”€ ğŸ“„ Dockerfile              # Docker æ˜ åƒé…ç½®
â””â”€â”€ ğŸ“„ docker-compose.yml      # Docker Compose é…ç½®
```

## ğŸ“„ æ ¹ç›®éŒ„æ–‡ä»¶

### é…ç½®æ–‡ä»¶
- `package.json` - æ ¹ç›®éŒ„é…ç½® (npm workspaces)
- `package-lock.json` - ä¾è³´é–å®šæ–‡ä»¶
- `.gitignore` - Git å¿½ç•¥æ–‡ä»¶
- `env.example` - ç’°å¢ƒè®Šé‡æ¨¡æ¿

### æ–‡æª”æ–‡ä»¶
- `README.md` - é …ç›®ä¸»è¦èªªæ˜æ–‡æª”
- `INTEGRATION_GUIDE.md` - æ•´åˆæŒ‡å— (å·²ç§»è‡³ docs/)

## ğŸ” é—œéµæ–‡ä»¶èªªæ˜

### å¾Œç«¯é—œéµæ–‡ä»¶

| æ–‡ä»¶ | ä½œç”¨ |
|------|------|
| `backend/src/app.ts` | Express æ‡‰ç”¨é…ç½®ï¼Œä¸­é–“ä»¶è¨­ç½® |
| `backend/src/server.ts` | æœå‹™å™¨å•Ÿå‹•æ–‡ä»¶ |
| `backend/src/db/schema.ts` | æ•¸æ“šåº«è¡¨çµæ§‹å®šç¾© |
| `backend/src/routes/` | API è·¯ç”±å®šç¾© |
| `backend/drizzle.config.ts` | Drizzle ORM é…ç½® |

### å‰ç«¯é—œéµæ–‡ä»¶

| æ–‡ä»¶ | ä½œç”¨ |
|------|------|
| `frontend/gulpfile.js` | Gulp æ§‹å»ºé…ç½® |
| `frontend/build.json` | æ§‹å»ºåƒæ•¸é…ç½® |
| `frontend/src/nav.json` | å°èˆªé…ç½® |
| `frontend/src/template/` | Handlebars æ¨¡æ¿ |
| `frontend/src/scss/app.core.scss` | æ ¸å¿ƒæ¨£å¼æ–‡ä»¶ |

### é…ç½®é—œéµæ–‡ä»¶

| æ–‡ä»¶ | ä½œç”¨ |
|------|------|
| `package.json` | npm workspaces é…ç½® |
| `shared/config.js` | å…±äº«é…ç½® |
| `env.example` | ç’°å¢ƒè®Šé‡æ¨¡æ¿ |
| `.gitignore` | Git å¿½ç•¥è¦å‰‡ |

## ğŸš€ é–‹ç™¼æµç¨‹

### 1. å¾Œç«¯é–‹ç™¼
- åœ¨ `backend/src/` ä¸­é–‹ç™¼ API
- ä½¿ç”¨ TypeScript ç·¨å¯«ä»£ç¢¼
- é€šé `npm run dev` å•Ÿå‹•é–‹ç™¼æœå‹™å™¨

### 2. å‰ç«¯é–‹ç™¼
- åœ¨ `frontend/src/` ä¸­é–‹ç™¼ UI
- ä½¿ç”¨ SmartAdmin æ¡†æ¶
- é€šé `npm run gulp` å•Ÿå‹•é–‹ç™¼æœå‹™å™¨

### 3. æ•¸æ“šåº«é–‹ç™¼
- åœ¨ `backend/src/db/schema.ts` ä¸­å®šç¾©è¡¨çµæ§‹
- ä½¿ç”¨ Drizzle ORM é€²è¡Œæ•¸æ“šåº«æ“ä½œ
- é€šé `npm run db:studio` ç®¡ç†æ•¸æ“šåº«

## ğŸ“ æ³¨æ„äº‹é …

1. **npm workspaces**: æ‰€æœ‰ä¾è³´å®‰è£åˆ°æ ¹ç›®éŒ„çš„ `node_modules`
2. **ç’°å¢ƒè®Šé‡**: è¤‡è£½ `env.example` åˆ° `.env` ä¸¦é…ç½®
3. **æ•¸æ“šåº«**: ç¢ºä¿ PostgreSQL æ­£åœ¨é‹è¡Œ
4. **ç«¯å£é…ç½®**: å¾Œç«¯ 3000ï¼Œå‰ç«¯ 8080ï¼Œæ•¸æ“šåº«ç®¡ç† 4983

---

ğŸ“– æ›´å¤šè©³ç´°ä¿¡æ¯è«‹åƒè€ƒ [README.md](../README.md)
